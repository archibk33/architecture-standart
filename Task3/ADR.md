### **Название задачи:** 
(MVP) Онлайн открытие депозитов

### **Автор:**
Команда цифровой трансформации 

### **Дата:**
2025-06-28

---

### **Функциональные требования**

| **№** | **Действующие лица или системы** | **Use Case**                                 | **Описание**                                                                |
|:-----:|----------------------------------|----------------------------------------------|-----------------------------------------------------------------------------|
| 1     | Клиент                           | Подача заявки на депозит через интернет-банк | Авторизованный клиент выбирает счёт и сумму, подтверждает заявку через СМС. |
| 2     | Клиент                           | Подача заявки на депозит через сайт          | Неавторизованный пользователь вводит ФИО и телефон, заявка уходит в CRM.    |
| 3     | Интернет-банк                    | Обработка заявки                             | Проверка данных клиента, формирование заявки, отправка в backend.           |
| 4     | Сайт                             | Отправка заявки в кол-центр                  | Отправка контактной информации в CRM                                        |
| 5     | Центр ставок                     | Получение ставок                             | Сайт регулярно обновляют ставки из централизованного источника.             |

---

### **Нефункциональные требования**

| №  | Требование                                                                                      |
|----|--------------------------------------------------------------------------------------------------|
| 1  | Интерфейс должен выглядеть привычно для клиентов и соответствовать дизайн-гайдам банка.          |
| 2  | Система должна работать быстро — желательно, чтобы клиент не ждал более 200 миллисекунд.        |
| 3  | Сервис должен быть доступен круглосуточно и надёжно работать (SLA не ниже 99.9%).               |
| 4  | Система должна масштабироваться, если пользователей станет больше, без ухудшения скорости.       |
| 5  | Нужно использовать те технологии, которые уже применяются в банке: .NET, MS SQL, Oracle.        |
| 6  | Все данные должны передаваться по защищённым каналам — например, через HTTPS и TLS.              |
| 7  | Интернет-банк не должен обращаться к АБС напрямую — нужен промежуточный слой, чтобы разгрузить АБС. |
| 8  | Архитектура должна быть готова к будущему развитию — переходу на микросервисы, если понадобится. |
| 9  | Лучше не менять СМС-ядро подрядчика, а использовать то, что уже реализовано в интернет-банке.    |


---

### **Решение**

#### Диаграмма контекста

В рамках MVP участвуют следующие ключевые элементы:
- **Клиент** — может подать заявку через интернет-банк или сайт
- **Интернет-банк** — основной канал для подачи онлайн-заявок
- **Публичный сайт** — собирает контакты новых клиентов
- **Централизованный источник ставок** — обеспечивает единый источник актуальных ставок
- **CRM/Кол-центр** — обрабатывает заявки с сайта
- **АБС** — принимает заявки из интернет-банка (не напрямую)

> См. файл: [`context.puml`](./context.puml)

#### Диаграмма контейнеров

Внутри интернет-банка:
- **Frontend (SPA)** — интерфейс на React/Angular
- **Backend API (.NET)** — логика формирования заявок, отправка в АБС, интеграции
- **Собственная БД** — MS SQL, хранение заявок и логов
- **Интеграции**: с системой ставок, СМС-шлюзом, системой авторизации и внешним шлюзом к АБС

> См. файл: [`container.puml`](./container.puml)

#### Обоснование архитектуры

Решение основано и построено :
- на существующем технологическом стеке банка (для скорости и минимизации рисков);
- на разделении каналов (сайт / интернет банк) и обязанностей (инфо сбор / полноценная заявка);
- соблюдении безопасности и изоляции АБС от прямого доступа.

Архитектура расширяема: backend интернет банка может быть мегрирован на архитектуру микросервисов (отдельный сервис подачи заявок как пример).

---

### **Альтернативы**

| Альтернатива                                      | Комментарий                                                              |
|---------------------------------------------------|---------------------------------------------------------------------------|
| Прямое обращение интернет банка к АБС             | Не подходит — АБС перегружена, нарушается принцип изоляции.              |
| Модификация СМС-ядра подрядчика                   | Нежелательна — создаёт зависимость и увеличивает сроки.                  |
| Использование сайта для подачи полноценных заявок | Неприемлемо для MVP — нет авторизации, сложно обеспечить безопасность.   |

---

### **Недостатки, ограничения, риски**

- Если будет слишком много пользователей, заявки или ставки могут приходить с задержкой.
- В MVP не предусмотрена полная электронная подача документов с электронной подписью.
- На сайте нельзя проверить, насколько правильно клиент ввёл свои данные (ФИО и телефон).
- Некоторые внутренние системы банка не поддерживают современные API, поэтому понадобится специальная прослойка между ними и интернет-банком.
- Заявки с сайта и из интернет-банка обрабатываются в разных местах — пока нет общей очереди заявок.

---
